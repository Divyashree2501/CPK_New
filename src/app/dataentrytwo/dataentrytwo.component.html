
<ngx-spinner bdColor="rgba(0, 0, 0, 0.8)" size="large" color="#fff" type="ball-atom" [fullScreen]="true">
    <p style="color: white"> Loading... </p>
</ngx-spinner>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<nav class="navbar navbar-expand-lg " style="background-color: #3f51b5">
  <div class="container-fluid">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" 
    data-bs-target="#navbarTogglerDemo03" aria-controls="navbarTogglerDemo03"
     aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    
    <div class="collapse navbar-collapse" id="navbarTogglerDemo03">

      <button type="button" style="border-radius:4px"
         ><img src="./assets/tvslogo.png" alt="" style="width:45px">  </button>
      <a class="navbar-brand"   style="padding-left:40%;color: #f9f9fc;padding-bottom:1%"> Supplier CPK </a>
    
      <div class="row" style="padding-left:30%">

        
    
        <div class="col-lg-3">
            <button type="button" class="navButton" (click)='DataEntry1()'><i class="fa fa-arrow-circle-o-left" style="color: rgb(248, 244, 244);
           
                padding: 0;
                font-size: 17px;
               "></i>  back
              
            </button>
            
         
        </div>
     
        <div class="col-lg-3">

            <button type="button" class="navButton" routerLink="/home"><i class="fa fa-home" style="color: rgb(248, 244, 244);
           
              padding: 0;
              font-size: 17px;
             "></i>Home</button>
        
        
         
        </div>

        
          <div class="col-lg-3">

            <button type="button" class="navButton" routerLink="/vlogin"><i class="fa fa-sign-out" style="color: rgb(248, 244, 244);
           
              padding: 0;
              font-size: 17px;
             "></i>Logout</button>
        
        
         
        </div>

       

      </div>

      
    </div>
  </div>
</nav>

<form [formGroup]="profileForm">
    <div class="d-flex justify-content-center align-items-center">
        <div class="row">
            <div class="col">
                <h4 mat-dialog-title style="color: #0a58ca;
            font-weight: bold;
            font-size: 20px;padding-top:5%;">Lot Inspection Details
                </h4>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="card">
            <div class="card-body">
                <div class="d-flex justify-content-center align-items-center">
                    <div class="row">

                        <!-- <div class="col">
                            <mat-form-field appearance="outline" style="width: 100%;">
                                <mat-label>Plant</mat-label>
                                <input matInput required class="form-Control" formControlName="WERKS" readonly>
                            </mat-form-field>
                        </div> -->
                        <div class="col">
                            <mat-form-field appearance="outline" style="width: 100%;">
                                <mat-label>Material</mat-label>
                                <input matInput required class="form-Control" formControlName="MATNR" readonly>
                            </mat-form-field>
                        </div>
                        <div class="col">
                            <mat-form-field appearance="outline" style="width: 100%;">
                                <mat-label>Material Desc.</mat-label>
                                <input matInput required class="form-Control" formControlName="MAKTX" readonly>
                            </mat-form-field>
                        </div>
                        <div class="col">
                            <mat-form-field appearance="outline" style="width: 100%;">
                                <mat-label>Date</mat-label>
                                <input matInput required class="form-Control" formControlName="PASTRTERM" readonly>
                            </mat-form-field>
                        </div>
                        <div class="col">
                            <mat-form-field appearance="outline" style="width: 100%;">
                                <mat-label>Drawing Issue</mat-label>
                                <input matInput required class="form-Control" formControlName="DRW_ISSUE" readonly>
                            </mat-form-field>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col">
                            <mat-form-field appearance="outline" style="width: 100%;">
                                <mat-label>Drawing Rev.</mat-label>
                                <input matInput required class="form-Control" formControlName="DRW_REVISION" readonly>
                            </mat-form-field>
                        </div>
                        <div class="col">
                            <mat-form-field appearance="outline" style="width: 100%;">
                                <mat-label>Prod. Line</mat-label>
                                <input matInput class="form-Control" formControlName="SUP_LINE" readonly>
                            </mat-form-field>
                        </div>
                        <div class="col">
                            <mat-form-field appearance="outline" style="width: 100%;">
                                <mat-label>Inspection Lot</mat-label>
                                <input matInput required class="form-Control" formControlName="PRUEFLOS" readonly>
                            </mat-form-field>
                        </div>
                        <div class="col">
                            <mat-form-field appearance="outline" style="width: 100%;">
                                <mat-label>Status</mat-label>
                                <input matInput required class="form-Control" formControlName="STATUS" readonly>
                            </mat-form-field>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</form>

<div class="example-container" *ngIf="dataSourceShow">
    <table mat-table [dataSource]="dataSourceMain" class="mat-elevation-z8">
        <ng-container matColumnDef="Position">
            <th mat-header-cell *matHeaderCellDef> SNo. </th>
            <td mat-cell *matCellDef="let element;let i = index"> {{i+1}} </td>
        </ng-container>

        <ng-container matColumnDef="VORGLFNR">
            <th mat-header-cell *matHeaderCellDef> Opn Code </th>
            <td mat-cell *matCellDef="let element">
                {{element.VORGLFNR}}
            </td>
        </ng-container>

        <ng-container matColumnDef="LTXA1">
            <th mat-header-cell *matHeaderCellDef> Opn Desc. </th>
            <td mat-cell *matCellDef="let element">
                {{element.LTXA1}}
            </td>
        </ng-container>

        <ng-container matColumnDef="MERKNR">
            <th mat-header-cell *matHeaderCellDef> Character ID </th>
            <td mat-cell *matCellDef="let element">
                {{element.MERKNR}}
            </td>
        </ng-container>

        <ng-container matColumnDef="KURZTEXT">
            <th mat-header-cell *matHeaderCellDef> Character ID Desc. </th>
            <td mat-cell *matCellDef="let element">
                {{element.KURZTEXT}}
            </td>
        </ng-container>

        <ng-container matColumnDef="LSL">
            <th mat-header-cell *matHeaderCellDef> LSL </th>
            <td mat-cell *matCellDef="let element">
                {{element.LSL}}
            </td>
        </ng-container>

        <ng-container matColumnDef="USL">
            <th mat-header-cell *matHeaderCellDef> USL </th>
            <td mat-cell *matCellDef="let element">
                {{element.USL}}
            </td>
        </ng-container>
        <ng-container matColumnDef="MASSEINHSW">
            <th mat-header-cell *matHeaderCellDef> UOM </th>
            <td mat-cell *matCellDef="let element">
                {{element.MASSEINHSW}}
            </td>
        </ng-container>

        <!-- <ng-container matColumnDef="MESSWERT1">
            <th mat-header-cell *matHeaderCellDef> Value 1*</th>
            <td mat-cell *matCellDef="let element">
                <ng-container *ngIf="LOTStatus =='Open'">
            
                    <input autofocus type="text" value="element.MESSWERT1" [(ngModel)]="element.MESSWERT1" required
                        *ngIf="(element.MESSWERT1  >= element.LSL && element.USL  >= element.MESSWERT1)"
                        style="width: 100px;color: green;font-size: 12px;font-weight: bold;">
                   
                    <input autofocus type="text" value="element.MESSWERT1" [(ngModel)]="element.MESSWERT1" required
                        *ngIf="(element.MESSWERT1 < element.LSL) || (element.MESSWERT1  > element.USL)"
                        style="width: 100px;color: red;font-size: 12px;font-weight: bold;">
                </ng-container>

                <ng-container *ngIf="LOTStatus !='Open'">
                    <input type="text" value="element.MESSWERT1" [(ngModel)]="element.MESSWERT1" required
                        *ngIf="(element.MESSWERT1  >= element.LSL && element.USL  >= element.MESSWERT1)"
                        style="width: 100px;color: green;font-size: 12px;font-weight: bold;" readonly>
                    <input type="text" value="element.MESSWERT1" [(ngModel)]="element.MESSWERT1" required
                        *ngIf="(element.MESSWERT1 < element.LSL) || (element.MESSWERT1  > element.USL)"
                        style="width: 100px;color: red;font-size: 12px;font-weight: bold;" readonly>
                </ng-container>
            </td>
        </ng-container>

        <ng-container matColumnDef="MESSWERT2">
            <th mat-header-cell *matHeaderCellDef> Value 2*</th>
            <td mat-cell *matCellDef="let element">
                <ng-container *ngIf="LOTStatus =='Open'">
                   
                    <input type="text" value="element.MESSWERT2" [(ngModel)]="element.MESSWERT2" required
                        *ngIf="(element.MESSWERT2  >= element.LSL && element.USL  >= element.MESSWERT2)"
                        style="width: 100px;color: green;font-size: 12px;font-weight: bold;">
                    
                    <input type="text" value="element.MESSWERT2" [(ngModel)]="element.MESSWERT2" required
                        *ngIf="(element.MESSWERT2 < element.LSL) || (element.MESSWERT2  > element.USL)"
                        style="width: 100px;color: red;font-size: 12px;font-weight: bold;">
                </ng-container>

                <ng-container *ngIf="LOTStatus !='Open'">
                    <input type="text" value="element.MESSWERT2" [(ngModel)]="element.MESSWERT2" required
                        *ngIf="(element.MESSWERT2  >= element.LSL && element.USL  >= element.MESSWERT2)"
                        style="width: 100px;color: green;font-size: 12px;font-weight: bold;" readonly>
                    <input type="text" value="element.MESSWERT2" [(ngModel)]="element.MESSWERT2" required
                        *ngIf="(element.MESSWERT2 < element.LSL) || (element.MESSWERT2  > element.USL)"
                        style="width: 100px;color: red;font-size: 12px;font-weight: bold;" readonly>
                </ng-container>
            </td>
        </ng-container>

        <ng-container matColumnDef="MESSWERT3" style="width: 50%;">
            <th mat-header-cell *matHeaderCellDef> Value 3</th>
            <td mat-cell *matCellDef="let element">
                <ng-container *ngIf="LOTStatus =='Open'">
                  
                    <input type="text" value="element.MESSWERT3" [(ngModel)]="element.MESSWERT3" required
                        *ngIf="(element.MESSWERT3  >= element.LSL && element.USL  >= element.MESSWERT3)"
                        style="width: 100px;color: green;font-size: 12px;font-weight: bold;">
                   
                    <input type="text" value="element.MESSWERT3" [(ngModel)]="element.MESSWERT3" required
                        *ngIf="(element.MESSWERT3 < element.LSL) || (element.MESSWERT3  > element.USL)"
                        style="width: 100px;color: red;font-size: 12px;font-weight: bold;">
                </ng-container>

                <ng-container *ngIf="LOTStatus !='Open'">
                    <input type="text" value="element.MESSWERT3" [(ngModel)]="element.MESSWERT3" required
                        *ngIf="(element.MESSWERT3  >= element.LSL && element.USL  >= element.MESSWERT3)"
                        style="width: 100px;color: green;font-size: 12px;font-weight: bold;" readonly>
                    <input type="text" value="element.MESSWERT3" [(ngModel)]="element.MESSWERT3" required
                        *ngIf="(element.MESSWERT3 < element.LSL) || (element.MESSWERT3  > element.USL)"
                        style="width: 100px;color: red;font-size: 12px;font-weight: bold;" readonly>
                </ng-container>
            </td>
        </ng-container>

        <ng-container matColumnDef="MESSWERT4" style="width: 50%;">
            <th mat-header-cell *matHeaderCellDef> Value 4</th>
            <td mat-cell *matCellDef="let element">
                <ng-container *ngIf="LOTStatus =='Open'">
                    
                    <input type="text" value="element.MESSWERT4" [(ngModel)]="element.MESSWERT4" required
                        *ngIf="(element.MESSWERT4  >= element.LSL && element.USL  >= element.MESSWERT4)"
                        style="width: 100px;color: green;font-size: 12px;font-weight: bold;">
                   
                    <input type="text" value="element.MESSWERT4" [(ngModel)]="element.MESSWERT4" required
                        *ngIf="(element.MESSWERT4 < element.LSL) || (element.MESSWERT4  > element.USL)"
                        style="width: 100px;color: red;font-size: 12px;font-weight: bold;">
                </ng-container>

                <ng-container *ngIf="LOTStatus !='Open'">
                    <input type="text" value="element.MESSWERT4" [(ngModel)]="element.MESSWERT4" required
                        *ngIf="(element.MESSWERT4  >= element.LSL && element.USL  >= element.MESSWERT4)"
                        style="width: 100px;color: green;font-size: 12px;font-weight: bold;" readonly>
                    <input type="text" value="element.MESSWERT4" [(ngModel)]="element.MESSWERT4" required
                        *ngIf="(element.MESSWERT4 < element.LSL) || (element.MESSWERT4  > element.USL)"
                        style="width: 100px;color: red;font-size: 12px;font-weight: bold;" readonly>
                </ng-container>
            </td>
        </ng-container>

        <ng-container matColumnDef="MESSWERT5" style="width: 50%;">
            <th mat-header-cell *matHeaderCellDef> Value 5</th>
            <td mat-cell *matCellDef="let element">
                <ng-container *ngIf="LOTStatus =='Open'">
                  
                    <input type="text" value="element.MESSWERT5" [(ngModel)]="element.MESSWERT5" required
                        *ngIf="(element.MESSWERT5  >= element.LSL && element.USL  >= element.MESSWERT5)"
                        style="width: 100px;color: green;font-size: 12px;font-weight: bold;">
                   
                    <input type="text" value="element.MESSWERT5" [(ngModel)]="element.MESSWERT5" required
                        *ngIf="(element.MESSWERT5 < element.LSL) || (element.MESSWERT5  > element.USL)"
                        style="width: 100px;color: red;font-size: 12px;font-weight: bold;">
                </ng-container>

                <ng-container *ngIf="LOTStatus !='Open'">
                    <input type="text" value="element.MESSWERT5" [(ngModel)]="element.MESSWERT5" required
                        *ngIf="(element.MESSWERT5  >= element.LSL && element.USL  >= element.MESSWERT5)"
                        style="width: 100px;color: green;font-size: 12px;font-weight: bold;" readonly>
                    <input type="text" value="element.MESSWERT5" [(ngModel)]="element.MESSWERT5" required
                        *ngIf="(element.MESSWERT5 < element.LSL) || (element.MESSWERT5  > element.USL)"
                        style="width: 100px;color: red;font-size: 12px;font-weight: bold;" readonly>
                </ng-container>
            </td>
        </ng-container>

        <ng-container matColumnDef="MESSWERT6" style="width: 50%;">
            <th mat-header-cell *matHeaderCellDef> Value 6</th>
            <td mat-cell *matCellDef="let element">
                <ng-container *ngIf="LOTStatus =='Open'">
                   
                    <input type="text" value="element.MESSWERT6" [(ngModel)]="element.MESSWERT6" required
                        *ngIf="(element.MESSWERT6  >= element.LSL && element.USL  >= element.MESSWERT6)"
                        style="width: 100px;color: green;font-size: 12px;font-weight: bold;">
                   
                    <input type="text" value="element.MESSWERT6" [(ngModel)]="element.MESSWERT6" required
                        *ngIf="(element.MESSWERT6 < element.LSL) || (element.MESSWERT6  > element.USL)"
                        style="width: 100px;color: red;font-size: 12px;font-weight: bold;">
                </ng-container>

                <ng-container *ngIf="LOTStatus !='Open'">
                    <input type="text" value="element.MESSWERT6" [(ngModel)]="element.MESSWERT6" required
                        *ngIf="(element.MESSWERT6  >= element.LSL && element.USL  >= element.MESSWERT6)"
                        style="width: 100px;color: green;font-size: 12px;font-weight: bold;" readonly>
                    <input type="text" value="element.MESSWERT6" [(ngModel)]="element.MESSWERT6" required
                        *ngIf="(element.MESSWERT6 < element.LSL) || (element.MESSWERT6  > element.USL)"
                        style="width: 100px;color: red;font-size: 12px;font-weight: bold;" readonly>
                </ng-container>
            </td>
        </ng-container> -->

        <ng-container matColumnDef="MESSWERT1">
            <th mat-header-cell *matHeaderCellDef> Value 1*</th>
            <td mat-cell *matCellDef="let element">
                <ng-container *ngIf="LOTStatus =='Open'">
                    <input type="text" value="element.MESSWERT1" [(ngModel)]="element.MESSWERT1" required 
                    [ngClass]="getClassValue(element.LSL,element.USL,element.MESSWERT1) "
                    style="width: 100px;">
                </ng-container>

                <ng-container *ngIf="LOTStatus !='Open'">
                    <input type="text" value="element.MESSWERT1"   [(ngModel)]="element.MESSWERT2" required
                     required
                    style="width: 100px;" readonly>
                </ng-container>
            </td>
        </ng-container>

        <ng-container matColumnDef="MESSWERT2">
            <th mat-header-cell *matHeaderCellDef> Value 2*</th>
            <td mat-cell *matCellDef="let element">
                <ng-container *ngIf="LOTStatus =='Open'">
                    <input type="text" value="element.MESSWERT2" [(ngModel)]="element.MESSWERT2" 
                     [ngClass]=" getClassValuetwo(element.LSL,element.USL,element.MESSWERT2)"
                    required
                    style="width: 100px;">
                </ng-container>

                <ng-container *ngIf="LOTStatus !='Open'">
                    <input type="text" value="element.MESSWERT2" [(ngModel)]="element.MESSWERT2" required
                    style="width: 100px;" readonly>
                </ng-container>
            </td>
        </ng-container>

        <ng-container matColumnDef="MESSWERT3" style="width: 50%;">
            <th mat-header-cell *matHeaderCellDef> Value 3</th>
            <td mat-cell *matCellDef="let element">
                <ng-container *ngIf="LOTStatus =='Open'">
                    <input type="text" value="element.MESSWERT3" [(ngModel)]="element.MESSWERT3" required
                     [ngClass]=" getClassValuethree(element.LSL,element.USL,element.MESSWERT3)"
                    style="width: 100px;">
                </ng-container>

                <ng-container *ngIf="LOTStatus !='Open'">
                    <input type="text" value="element.MESSWERT3" [(ngModel)]="element.MESSWERT3" required
                    style="width: 100px;" readonly>
                </ng-container>
            </td>
        </ng-container>

        <ng-container matColumnDef="MESSWERT4" style="width: 50%;">
            <th mat-header-cell *matHeaderCellDef> Value 4</th>
            <td mat-cell *matCellDef="let element">
                <ng-container *ngIf="LOTStatus =='Open'">  
                    <input type="text" value="element.MESSWERT4" [(ngModel)]="element.MESSWERT4" required 
                     [ngClass]=" getClassValuefour(element.LSL,element.USL,element.MESSWERT4)"
                    style="width: 100px;">
                </ng-container>

                <ng-container *ngIf="LOTStatus !='Open'">
                    <input type="text" value="element.MESSWERT4" [(ngModel)]="element.MESSWERT4" required
                    style="width: 100px;" readonly>
                </ng-container>
            </td>
        </ng-container>

        <ng-container matColumnDef="MESSWERT5" style="width: 50%;">
            <th mat-header-cell *matHeaderCellDef> Value 5</th>
            <td mat-cell *matCellDef="let element">
                <ng-container *ngIf="LOTStatus =='Open'">
                    <input type="text" value="element.MESSWERT5" [(ngModel)]="element.MESSWERT5" required  
                    [ngClass]=" getClassValuefive(element.LSL,element.USL,element.MESSWERT5)"
                    style="width: 100px;">
                    
                </ng-container>

                <ng-container *ngIf="LOTStatus !='Open'">
                    <input type="text" value="element.MESSWERT5" [(ngModel)]="element.MESSWERT5" required  
                    style="width: 100px;" readonly>
                </ng-container>
            </td>
        </ng-container>

        <ng-container matColumnDef="MESSWERT6" style="width: 50%;">
            <th mat-header-cell *matHeaderCellDef> Value 6</th>
            <td mat-cell *matCellDef="let element">
                <ng-container *ngIf="LOTStatus =='Open'">
                    <input type="text" value="element.MESSWERT6" [(ngModel)]="element.MESSWERT6" required
                     [ngClass]=" getClassValuesix(element.LSL,element.USL,element.MESSWERT6)"
                        style="width: 100px;">
                </ng-container>

                <ng-container *ngIf="LOTStatus !='Open'">
                    <input type="text" value="element.MESSWERT6" [(ngModel)]="element.MESSWERT6" required
                        style="width: 100px;" readonly>
                </ng-container>
            </td>
        </ng-container>

        <ng-container matColumnDef="PRT_DESC">
            <th mat-header-cell *matHeaderCellDef> Inspection Method </th>
            <td mat-cell *matCellDef="let element">
                {{element.PRT_DESC}}
            </td>
        </ng-container>

        <!-- <ng-container matColumnDef="PROD_PLAN">
            <th mat-header-cell *matHeaderCellDef> Complaint Type </th>
            <td mat-cell *matCellDef="let element">
                <mat-select class="form-control" required value="element.Performance" [(ngModel)]="element.PROD_PLAN"
                    style="width: 120px;">
                    <mat-option *ngFor="let PROD_PLAN of PRDPlanList" [value]="PROD_PLAN">
                        {{PROD_PLAN}}
                    </mat-option>
                </mat-select>
            </td>
        </ng-container> -->


        <ng-container matColumnDef="header">
            <th mat-header-cell *matHeaderCellDef [attr.colspan]="15" style="text-align: left!important;"> Inspection
                LOT Details
            </th>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="['header'];sticky:true"></tr>

        <tr mat-header-row *matHeaderRowDef="displayedColumns;sticky:true"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
</div>
<br />

<form [formGroup]="profileForm" *ngIf="btnShow">
    <div class="d-flex justify-content-center align-items-center">
        <div class="row">
            <div class="col">
                <button type="save" class="btn btn-warning" (click)='btnSave()'>Save</button>
            </div>
            <div class="col">
                <button type="submit" class="btn btn-success" (click)='btnSubmit()'>Submit</button>
            </div>
        </div>
    </div>
</form>
<br />
